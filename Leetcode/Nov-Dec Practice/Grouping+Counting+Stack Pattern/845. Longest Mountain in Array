Question: https://leetcode.com/problems/longest-mountain-in-array/description/

Solution:
    class Solution {
        
        /*
        This is the solution for O(n^2) - naive approach

        public int longestMountain(int[] arr) {
            int max_len = 0;

            if(arr.length<3) return 0;

            for(int i=0;i<arr.length;i++) {
                int left=i,right=i;
                int peek = arr[left];

                boolean inc=true;
                while(left>=1) {
                    if(arr[left] <= arr[left-1] || arr[left] > peek || arr[left-1] > peek) {
                        inc = false;
                        break;
                    }
                    left--;
                }

                if(left==i) continue;

                boolean dec = true;
                while(right<arr.length-1) {
                    if(arr[right] <= arr[right+1] || arr[right] > peek || arr[right+1] > peek) {
                        dec = false;
                        break;
                    }
                    right++;
                }
                if(right==i) continue;

                max_len = Math.max(max_len,(right-left));
            }

            return max_len==0 ? 0 : max_len+1;
        }

        */

        /*

        This is my O(n) optimized solution
        public int longestMountain(int[] arr) {

            int max_len =0;
            int up=0,down=0,i=1;

            for(i=1;i<arr.length;i++) {
                if((down>0 && arr[i] > arr[i-1]) || (arr[i] == arr[i-1])) {
                    up=0;
                    down=0;
                }

                if(arr[i]>arr[i-1]) up++;
                else if (arr[i] < arr[i-1]) down++;

                if(up>0 && down>0) {
                    max_len = Math.max(max_len,down+up+1);
                }
            }
            return max_len;
        }
        */

        /*
        public int longestMountain(int[] arr) {
            int[] up = new int[arr.length];
            int[] down = new int[arr.length];

            for(int i=arr.length-2;i>=0;i--) {
                if(arr[i] > arr[i+1]) down[i] = down[i+1]+1;
            }

            for(int i=1;i<arr.length-1;i++) {
                if(arr[i] > arr[i-1]) up[i] = up[i-1]+1;
            }

            int max_len =0;
            for(int i=0;i<arr.length;i++) {
                // if(arr[i] < arr[i+1]) up[i] = up[i+1]+1;
                if(up[i]>0 && down[i]>0) max_len = Math.max(max_len,up[i]+down[i]+1);
            }

            return max_len;
        }
        */

        // private int max_len=0;
        public int getIncLen(int[] arr,int idx,int[] dp) {
            if(idx<0) return 0;
            if(dp[idx]!=-1) return dp[idx];

            if(idx>0 && arr[idx] > arr[idx-1]) {
                return dp[idx] = 1+getIncLen(arr,idx-1,dp);
            }else {
                return dp[idx] = 0;
            }
        }

        public int getDecLen(int[] arr,int idx,int[] dp) {
            if(idx>=arr.length) return 0;
            if(dp[idx]!=-1) return dp[idx];

            if(idx+1<arr.length && arr[idx] > arr[idx+1]) {
                return dp[idx] = 1+getDecLen(arr,idx+1,dp);
            }else return dp[idx] = 0;
        }

        public int getLongestMoutain(int[] arr,int idx,int[] dp,int[] inc_memo,int[] dec_memo) {
            if(idx<0 || idx>=arr.length) return 0;

            if(dp[idx]!=0) return dp[idx];

            int move_left =0;
            if(inc_memo[idx]==-1) {
                move_left = getIncLen(arr,idx,inc_memo);
            }else {
                move_left = inc_memo[idx];
            }

            int move_right = 0;
            if(dec_memo[idx]==-1) {
                move_right = getDecLen(arr,idx,dec_memo);
            }else {
                move_right = dec_memo[idx];
            }

            return dp[idx] = (move_left>0 && move_right>0) ? move_left+move_right+1 : 0;
        }

        public int longestMountain(int[] arr) {
            int max_len = 0;
            int[] dp = new int[arr.length];
            int[] inc_memo = new int[arr.length];
            int[] dec_memo = new int[arr.length];

            Arrays.fill(inc_memo,-1);
            Arrays.fill(dec_memo,-1);

            for(int i=0;i<arr.length;i++) {
                max_len = Math.max(max_len,getLongestMoutain(arr,i,dp,inc_memo,dec_memo));
            }

            return max_len;
        }
    }

    /*
        arr = [2,1,4,7,3,2,5]
        -> 

        // recursion:
        [2,1,4,7,3,2,5] -> 
    */
