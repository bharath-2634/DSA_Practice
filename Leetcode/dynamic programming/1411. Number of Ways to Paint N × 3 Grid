Question: https://leetcode.com/problems/number-of-ways-to-paint-n-3-grid/description/


Solution:

/*

This is my recursive + memoization approach where T.C is O(n^4)
class Solution {
    private final int MOD = 1_000_000_007;

    public int getNumOfWays(int n,int row_idx,int[] colors,int[] pre_row,Map<String,Integer> dp) {
        if(row_idx==n) return 1;

        int count=0;
        String key = row_idx+"," +pre_row[0]+","+pre_row[1]+","+pre_row[2];

        if(dp.containsKey(key)) {
            return dp.get(key);
        }

        for(int i=0;i<3;i++) {
            for(int j=0;j<3;j++) {
                if(i==j) continue;
                for(int k=0;k<3;k++) {
                    if(j==k) continue;
                    int[] current_row = new int[3];
                    current_row[0] = colors[i];
                    current_row[1] = colors[j];
                    current_row[2] = colors[k];

                    if(row_idx>0 && (pre_row[0]==current_row[0] || pre_row[1]==current_row[1] || pre_row[2]==current_row[2])) continue;
                    count+=getNumOfWays(n,row_idx+1,colors,current_row,dp)%MOD;
                }
            }
        }

        dp.put(key,count);

        return count;
    }

    public int numOfWays(int n) {
        int[] colors = new int[3];
        colors[0] = 1;
        colors[1] = 2;
        colors[2] = 3;

        Map<String,Integer> dp = new HashMap<>();

        return getNumOfWays(n,0,colors,new int[3],dp)%MOD;
    }
}
*/


class Solution {
    private static final int MOD = 1_000_000_007;
    
    public int numOfWays(int n) {
        long aba = 6;
        long abc = 6;

        for(int i=0;i<n-1;i++) {
            long next_aba = (3*aba + 2*abc)%MOD;
            long next_abc = (2*aba + 2*abc)%MOD;

            aba = next_aba;
            abc = next_abc;
        }

        return (int) ((aba+abc)%MOD);
    }
}

/*
    base case given is -> n=1 => 3*2*2 = 12
    this is for the column validation (horizontal adj) 

    now the problem is turned down to -> count no. of valid vertical adj placements 

*/
